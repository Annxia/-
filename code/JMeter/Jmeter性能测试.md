
#### 性能测试概述
1. 通过并发工具请求服务器，提前发现性能问题，优化并且解决
2. 实际工作中什么时候才需要做性能测试？  
    第三方软件质检中心；  
    项目要求：常规需求；用户反映性能问题；对项目性能不放心  
3. 性能测试的最终目的
    - 多：可以支持更多的用户访问
    - 快：用户体验舒畅
    - 好：访问都能成功，没有错误率
    - 省：达到预期效果，尽可能节省资源
     
4. 项目场景提取与指标分析
    - 熟悉项目 
        - 业务：核心业务,高频业务
    - 性能测试流程：需求分析->测试准备->测试执行->结果分析与调优->报告与总结
    - 项目框架
        - springboot
        - 组件：
            - LVS ---负载均衡
            - NGINX ---(HAProxy)--负载均衡
            - Tomcat ---(weblogic)--应用服务器
            - Redis ---缓存服务器
            - rabbitMQ  Kafka ---消息队列
            - mysql(db) ---数据库
    - 项目部署
        - 框架  
            Tomcat、mysql(db)
        - 部署层  
            软件负载均衡：LVS、NGINX
            硬件负载均衡：F5
        - 硬件设备

#### JMeter操作汇总
1. 取样器的消息体类型
    - 参数  
        表单形式 变量=值  
    - 信息体
        - json格式
        - 表单格式：name=tom&age=10
        - xml
    - 文件上传
        - 文件上传
      
#### JMeter脚本开发实战
1. 脚本相关概念
    - 接口文档开发脚本
    - Fiddler抓包编写脚本
    - 录制脚本(JMeter代理服务器录制,Fiddler抓包导出jmx文件)

2. 参数化技能
    - 参数化  
        随机数、时间戳、cvs、变量  
        
    - 考虑的场景
        1. 登录
            - 单点登录: ---必须做参数化   
            一个帐号与密码只能登录一次，如果再次登录，会出现outline  
            如何验证是否单点:使用2个浏览器；Jmeter的线程组里设置5个用户，使用同步登录，会出现outline
            - 多点登录 
        2. 订单编号或身份证号/手机号-----唯一的---必须做参数化   
    
    - 操作流程  
        1. 先确认需要参数化的数据  
        2. 创建参数化的数据
        3. 关联变量
    
    - 参数化方式
        1. xxx.csv   xxx,xxx帐号密码使用方式
        2. 随机数 random
        3. 时间戳  毫秒ms 13位数据   秒s 10位
        4. 计数器 counter()
        5. 用户自定义变量

3. 变量跨线程组
    - 在需求提取数据的请求下 ----增加提取器(正则/json)
    - 增加一个后置处理器 --- BeanShell PostProcessor  设置全局变量  
    `${__setProperty(newresult,${result},)}`
    - 在后面的线程组获取全局变量 --- newresult
    `${__P(变量名)}  基本等同于 ${__property(变量名)}`

3. 脚本优化技巧
    - 开发脚本方式灵活选择
    - 准确性
    - 是否考虑参数化
    - 通用性-可维护高
    - 脚本组件适当选择性启用     
   
   
#### 企业级Grafana性能监控   
1. 场景需求

2. 性能场景指标  
    目的:验证最大在线用户数---负载测试逻辑
    - 错误率:<0.5%
    - 

3. 了解服务的架构与部署
    架构本身:  
    部署环境:

4. 监控平台 
    1. 打开Grafana监控被测服务器监控
        - 主要监控的数据:
            1. cpu使用率
                - sys--系统本身的进程使用率
                - usr--用户进程使用率 java进程，mysql进程
                - idle--空闲使用率
                - lowat--I/O使用率
            2. 内存
                - 总共内存
                - 剩余内存
                - 使用内存
                - swap--交互区 si so
            3. 磁盘
                - 读写速率
                - 读写时间
            4. 网络--暂不考虑
        


            